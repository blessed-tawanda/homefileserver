<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Upload A File</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/uploadstyle.css">
    <link rel="stylesheet" href="/css/fileinput.min.css">
    <link rel="stylesheet" href="/css/bttn.min.css">
    <link rel="stylesheet" href="/css/font-awesome.css" media="all">
    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="/js/fileinput.js" type="text/javascript"></script>
    <script src="/js/locales/fr.js" type="text/javascript"></script>
    <script src="/js/locales/es.js" type="text/javascript"></script>
    <script src="/themes/explorer-fa/theme.js" type="text/javascript"></script>
    <script src="/themes/fa/theme.js" type="text/javascript"></script>
    <script src="/js/popper.js"></script>
    <script src="/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="jumbotron container text-center" >
        <p>Please Select File(s) To Upload</p>
    </div>
    <div class="body container col-lg-6 col-lg-offset-3 col-sm-4 col-sm-offset-4 col-xs-4 col-xs-offset-4 text-center ">
        <form id="uploadform" action="/upload" enctype="multipart/form-data" method="post">
            <input id="input-b3" name="filename" type="file" class="file" multiple data-show-preview="true" data-show-upload="false" data-show-caption="false" data-msg-placeholder="Select {files} for upload...">
            <br>
            <button id="upload" class="bttn-float bttn-md bttn-primary float-right" type=""> Upload My Files </button>
        </form>
        <a href="/" class="bttn-float bttn-md bttn-danger float-left"> Back </a>
        <br>
        <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="100">
                <span class="sr-only">  % Complete</span>
            </div>
        </div>
    </div> 
</body>
<script>
    $(document).ready(function(){
        $("#uploadform").submit(function(e){
            e.preventDefault();
            var formData = new FormData($('#uploadform'))
            $.ajax({
                xhr: function(){ 
                    var xhr = new window.XMLHttpRequest();
                    xhr.upload.addEventListener('progress', function(e){
                            console.log(e.loaded);
                            console.log(e.total);   
                        
                    });
                    return xhr;
                },
                type: 'POST',
                url: '/upload',
                data: formData,
                //data: $('#upload').serialize(),
                //success: alert('WAwaw')
            })
        })
        // $('#uploadform').submit(function(e){
        //     if($('#input-b3').val()){
        //         e.preventDefault();
        //         $.ajax({
        //             beforeSubmit: function(){
        //                 $('.prograss-bar').width('0%');
        //             },
        //             uploadProgress: function(event,postion,total,percentComplete){
        //                 $('.progress-bar').width(percentComplete+'%');
        //                 $('.progress-bar').html('<div id="progress-status">'+percentComplete+'%</div>')
        //             },
        //             resetForm: true
        //         })
        //     }
        // })
        
    })


</script>

</html>